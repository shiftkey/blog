<!DOCTYPE html>

<!-- 
320 and Up boilerplate extension
Author: Andy Clarke
Version: 0.9b
URL: http://stuffandnonsense.co.uk/projects/320andup 
-->

<!--[if IEMobile 7 ]><html class="no-js iem7" manifest="default.appcache?v=1"><![endif]-->
<!--[if lt IE 7 ]><html class="no-js ie6" lang="en"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7" lang="en"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8" lang="en"><![endif]-->
<!--[if (gte IE 9)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" manifest="default.appcache?v=1" lang="en"><!--<![endif]-->

<head>
<meta charset="utf-8">

<title>Notes from BUILD</title>
<meta name="description" content="">
<meta name="author" content="brendan forster">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1">

<!-- robots -->
<meta name="robots" content="/robots.txt" />

<!-- For less capable mobile browsers
<link rel="stylesheet" media="handheld" href="css/handheld.css?v=1">  -->

<!-- For all browsers -->
<link rel="stylesheet" media="screen" href="/css/style.css?v=1">

<link rel="stylesheet" media="print" href="/css/print.css?v=1">
<!-- For progressively larger displays -->
<link rel="stylesheet" media="only screen and (min-width: 480px)" href="/css/480.css?v=1">
<link rel="stylesheet" media="only screen and (min-width: 768px)" href="/css/768.css?v=1">
<link rel="stylesheet" media="only screen and (min-width: 992px)" href="/css/992.css?v=1">
<link rel="stylesheet" media="only screen and (min-width: 1382px)" href="/css/1382.css?v=1">
<!-- For Retina displays -->
<link rel="stylesheet" media="only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)" href="/css/2x.css?v=1">

<link rel="stylesheet" media="screen" href="/css/custom.css?v=1">

<!-- JavaScript at bottom except for Modernizr -->
<script src="/js/libs/modernizr-1.7.min.js"></script>

<!-- For iPhone 4 -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/h/apple-touch-icon.png">
<!-- For iPad 1-->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/m/apple-touch-icon.png">
<!-- For iPhone 3G, iPod Touch and Android -->
<link rel="apple-touch-icon-precomposed" href="/img/l/apple-touch-icon-precomposed.png">
<!-- For Nokia -->
<link rel="shortcut icon" href="/img/l/apple-touch-icon.png">
<!-- For everything else -->
<link rel="shortcut icon" href="/favicon.ico">

<!--iOS. Delete if not required -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-startup-image" href="/img/splash.png">

<!--Microsoft. Delete if not required -->
<meta http-equiv="cleartype" content="on">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<!-- http://t.co/y1jPVnT -->
<link rel="canonical" href="/build/migration-tips-and-tricks.html">
</head>


<link rel="stylesheet" media="screen" href="/css/build.css?v=1">

<body class="clearfix">

<header role="banner" class="clearfix">
	<h1>Notes from BUILD</h1>
</header>

<div class="content clearfix">
	<article>
		<img class='right ' src='/img/main/metro-preview.png' width='' height='' alt='' title=''>

		<header>
	<h2>documenting the chaos</h2>
</header>

<article>
    <header>
        <h3>Migration Tips and Tricks</h3>
    </header>

    <section>
    <header>
        <h4>About</h4>
    </header>
        I spent today migrating an existing library (Stacky - details <a href="http://stacky.codeplex.com/">here</a>) into a Windows Runtime-compatible API. While I started out with the goal of having one codebase to rule them all, I quickly found this was awfully idealistic and focused on just the WinRT stuff.
    </section>

    <section>
        <header>
           <h4> What worked</h4>
        </header>

        Not much -  but I was unsurprised by that as there were many design decisions which are breaking changes for existing libraries. I'll refer to some of the sessions I've watched from BUILD about this topic:

        <ul>

        </ul>
    </section>

    <section>
        <header>
           <h4>Pain Points</h4>
        </header>

        A fair few - but this is to be expected. The move to asychronous methods which can be used synchronously thanks to the await and async keywords demands this, but does clean up a significant amount of code.

        <ul>

        </ul>
    </section>

    <section>
        <header>
        <h4>Public (or protected) generic methods</h4>
        </header>

        <blockquote><p><strong>Error:</strong> Generic type parameters may not appear in method signatures of Windows Runtime methods.</p></blockquote>
        <pre>
        protected void NotifyOfPropertyChange&lt;TProperty&gt;(Expression&lt;Func&lt;TProperty&gt;&gt; property)
        {
            NotifyOfPropertyChange(property.GetMemberInfo().Name);
        }
        </pre>

        <strong>Resolution: mark this as internal. Public or Protected</strong>
    </section>

     <section>
        <h4>Use an interface instead of an implementation</h4>
<blockquote><p><strong>Error:</strong> Although this type is not a valid Windows Runtime type, it implements interfaces which are valid Windows Runtime types.</p></blockquote>
        Consider changing the method signature to instead use one of the following types: 'System.Collections.Generic.IList<MyClass>, System.Collections.Generic.IReadOnlyList<MyClass>, System.Collections.Generic.IEnumerable<MyClass>'
    </section>

    <section>
          
        <strong>Error:</strong> Type 'MyClass' is unsealed but is not enabled for composition. Either seal 'MyClass', or mark it with the System.Runtime.InteropServices.WindowsRuntime.EnableCompositionAttribute so that you can derive from it. To use the class from JavaScript, you must seal it.
    </section>

    <section>
        <strong>Error:</strong>'MyClass.Method(System.Object parameter)' is a virtual method. Managed types may not expose new virtual methods in Windows Runtime.

        <strong>Error: </strong>Field names cannot differ only by case: 'Stacky.User.webSite' , 'Stacky.User.website'.

        <strong>Error: </strong>Interface 'Stacky.IPagedList<T>' requires interface 'System.Collections.Generic.IEnumerable<T>' which is not a Windows Runtime interface.  Exported interfaces may only require other Windows Runtime interfaces.

Field names cannot differ only by case: 'Namespace.Class.<PROPERTY>k__BackingField' , 'Stacky.ErrorResponse.<Property>k__BackingField'.	

     <strong>Error: </strong>	Unable to determine a default interface for runtime class 'Stacky.TagWiki'.  The class does not implement any interfaces, and no interface was generated for it because it does not contain any public methods, properties, or events.

<strong>Error: </strong>Unable to determine a default interface for runtime class 'Stacky.HttpResponse'.  The class does not implement any interfaces, and no interface was generated for it because it does not contain any public methods, properties, or events.	C:\Code\codeplex\shiftkey\stackywinrt\trunk\source\Stacky.WinRT\obj\Debug\Stacky.WinRT.winmdobj	Stacky.WinRT





    </section>

    </article>



	</article>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.5.1.min.js">\x3C/script>')</script>
<script src="/js/plugins.js"></script>
<script src="/js/script.js"></script>

<!--[if (lt IE 9) & (!IEMobile)]>
<script src="/js/libs/DOMAssistantCompressed-2.8.js"></script>
<script src="/js/libs/selectivizr-1.0.1.js"></script>
<script src="/js/libs/respond.min.js"></script>
<![endif]-->

<script>
var _gaq=[['_setAccount','UA-8441214-1'],['_trackPageview']]; 
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<noscript>Your browser does not support JavaScript!</noscript>

</body>
</html>