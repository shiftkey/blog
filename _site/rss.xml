<?xml version="1.0"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
<channel>
    <title>brendan forster.com</title>
    <link>http://brendanforster.com/</link>
    <atom:link href="http://brendanforster.com/rss.xml" rel="self" type="application/rss+xml" />
    <description></description>
    <language>en-au</language>
    <pubDate>Sat, 03 Dec 2011 14:21:37 +1000</pubDate>
    <lastBuildDate>Sat, 03 Dec 2011 14:21:37 +1000</lastBuildDate>

    
    <item>
      <title>ALT.NET Open Spaces</title>
      <link>http://brendanforster.comalt-net-open-spaces-2011.html</link>
      <pubDate>Sat, 03 Dec 2011 18:00:00 +1000</pubDate>
      <author>shift.key@gmail.com (Brendan Forster)</author>
      <guid>http://brendanforster.com./alt-net-open-spaces-recap</guid>
      <description>&lt;p&gt;Flew down to Melbourne this weekend to catch up with the locals and talk about various topics.&lt;/p&gt;

&lt;h3&gt;User Groups&lt;/h3&gt;

&lt;p&gt;How things have grown, how we got here, what has worked and what hasn't.&lt;/p&gt;

&lt;h3&gt;Code Dojo&lt;/h3&gt;

&lt;p&gt;discussed &lt;a href=&quot;http://codekata.pragprog.com/2007/01/kata_fourteen_t.html&quot;&gt;this kata&lt;/a&gt; and various design topics.&lt;/p&gt;

&lt;h3&gt;New Frontiers&lt;/h3&gt;

&lt;h3&gt;RAD Frameworks&lt;/h3&gt;

&lt;h3&gt;Refactoring&lt;/h3&gt;

&lt;h3&gt;&quot;What if this is as good as it gets?&quot;&lt;/h3&gt;

&lt;h3&gt;Code Coverage and Analysis&lt;/h3&gt;

&lt;p&gt;@scubamonki&lt;/p&gt;

&lt;h3&gt;Agile Discussion&lt;/h3&gt;
</description>
    </item>
    
    <item>
      <title>jQuery and KnockoutJS in Win8? Sure, why not!</title>
      <link>http://brendanforster.comjquery-knockout-win8.html</link>
      <pubDate>Tue, 25 Oct 2011 23:00:00 +1000</pubDate>
      <author>shift.key@gmail.com (Brendan Forster)</author>
      <guid>http://brendanforster.com./jquery-and-knockout-in-win8</guid>
      <description>&lt;p&gt;Apparently this is old news to some. Trendsetters...&lt;/p&gt;

&lt;p&gt;With Windows 8 supporting HTML/JS (I refuse to call anything HTML5 these days - the words have lost all meaning to me, but that's another topic) applications, I was asked if &lt;a href=&quot;http://jquery.com/&quot;&gt;jQuery&lt;/a&gt; is supported - with a goal to making JS applications more maintainable.&lt;/p&gt;

&lt;p&gt;As I'd heard it mentioned at BUILD - and hadn't heard a major drama since people have been using the Developer Preview bits - I expected that it worked. However, to confirm this for myself, I found this &lt;a href=&quot;http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/66273417-92cd-4a35-b9a1-281d962eff59&quot;&gt;forum thread&lt;/a&gt; on MSDN with a couple of caveats.&lt;/p&gt;

&lt;p&gt;No fire and brimstone? Oh well, I'll just double-check...&lt;/p&gt;

&lt;p&gt;After adding the jQuery file to the project, I modified the &lt;strong&gt;default.html&lt;/strong&gt; file to include the jQuery file &lt;strong&gt;before&lt;/strong&gt; the default.js file. The default.js file contains the bootstrapping code for the application:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;   &amp;lt;link rel=&quot;stylesheet&quot; href=&quot;/css/default.css&quot; /&amp;gt;
    &lt;strong&gt;&amp;lt;script src=&quot;/js/jquery-1.6.4.js&quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/strong&gt;
    &amp;lt;script src=&quot;/js/default.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;/head&amp;gt;

&lt;/code&gt;&lt;/pre&gt;


&lt;p&gt;And at the bottom of the default.js file, I use a simple selector to find a DOM element:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;            // other code

            WinJS.UI.process(&lt;strong&gt;$('#appbar')[0]&lt;/strong&gt;)
                .then(function () { 
                    &lt;strong&gt;$('#home').click(navigateHome);&lt;/strong&gt;
                });

            WinJS.Navigation.navigate(homePage);

            &lt;strong&gt;var host = $('#contentHost');&lt;/strong&gt;
        }
    }

    WinJS.Navigation.addEventListener('navigated', navigated);
    WinJS.Application.start();

})();
&lt;/code&gt;&lt;/pre&gt;


&lt;p&gt;and started making use of selectors elsewhere instead of document.getElementById to make the code more concise...&lt;/p&gt;

&lt;h2&gt;And what of KnockoutJS?&lt;/h2&gt;

&lt;p&gt;I've only had basic experience with &lt;a href=&quot;http://knockoutjs.com/&quot;&gt;Knockout&lt;/a&gt;, but found an easier scenario to support. I dropped in the code and modified the detailPage template.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;   &amp;lt;link rel=&quot;stylesheet&quot; href=&quot;/css/default.css&quot; /&amp;gt;
    &amp;lt;link rel=&quot;stylesheet&quot; href=&quot;/css/detailPage.css&quot; /&amp;gt;
    &amp;lt;script type=&quot;ms-deferred/javascript&quot; src=&quot;/js/detailPage.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
    &lt;strong&gt;&amp;lt;script type=&quot;ms-deferred/javascript&quot; src=&quot;/js/knockout-1.2.1.js&quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/strong&gt;
&amp;lt;/head&amp;gt;

&lt;/code&gt;&lt;/pre&gt;


&lt;p&gt;And then went to work making changes:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;In detailPage.js&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Before&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;function fragmentLoad(elements, options) {
    var item = options &amp;amp;&amp;amp; options.item ? options.item : getItem();
    elements.querySelector('.pageTitle').textContent = item.group.title;

    WinJS.UI.processAll(elements)
        .then(function () {
            elements.querySelector('.title').textContent = item.title;
            elements.querySelector('.content').innerHTML = item.content;
        });
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;After&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;function fragmentLoad(elements, options) {
    var item = options &amp;amp;&amp;amp; options.item ? options.item : getItem();
    WinJS.UI.processAll(elements).then(function () { &lt;strong&gt;ko.applyBindings(item);&lt;/strong&gt; });
}
&lt;/code&gt;&lt;/pre&gt;


&lt;p&gt;&lt;strong&gt;In detailPage.html - declared some bindings using the data-bind attribute&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;div class=&quot;detailPage fragment&quot;&amp;gt;
    &amp;lt;header role=&quot;banner&quot; aria-label=&quot;Header content&quot;&amp;gt;
        &amp;lt;button disabled class=&quot;win-backbutton&quot; aria-label=&quot;Back&quot;&amp;gt;&amp;lt;/button&amp;gt;
        &amp;lt;div class=&quot;titleArea&quot;&amp;gt;
            &amp;lt;h1 class=&quot;pageTitle win-title&quot; &lt;strong&gt;data-bind=&quot;text: group.title&quot;&lt;/strong&gt;&amp;gt;&amp;lt;/h1&amp;gt;

        &amp;lt;/div&amp;gt;
    &amp;lt;/header&amp;gt;
    &amp;lt;section role=&quot;main&quot; aria-label=&quot;Main content&quot;&amp;gt;
        &amp;lt;article&amp;gt;
            &amp;lt;div&amp;gt;
                &amp;lt;header&amp;gt;

                    &amp;lt;h1 class=&quot;title win-contentTitle&quot; &lt;strong&gt;data-bind=&quot;text: title&quot;&lt;/strong&gt;&amp;gt;&amp;lt;/h1&amp;gt;
                &amp;lt;/header&amp;gt;
                &amp;lt;div class=&quot;image&quot; &lt;strong&gt;data-bind=&quot;style: { color: backgroundColor }&quot;&lt;/strong&gt;&amp;gt;&amp;lt;/div&amp;gt;
                &amp;lt;div class=&quot;content&quot; &lt;strong&gt;data-bind=&quot;html: content&quot;&lt;/strong&gt;&amp;gt;&amp;lt;/div&amp;gt;
            &amp;lt;/div&amp;gt;

        &amp;lt;/article&amp;gt;
    &amp;lt;/section&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;


&lt;p&gt;So by moving the binding expressions to the UI (like the MVVM pattern that is popular with XAML application) we can lean on frameworks to make our Javascript code easier to maintain. Other components of the default templates have their own binding attributes - &lt;em&gt;data-win-bind&lt;/em&gt; - which I'll explain later, but I find the KnockoutJS syntax more concise.&lt;/p&gt;

&lt;p&gt;In particular the use of &lt;em&gt;textContent&lt;/em&gt; instead of &lt;em&gt;text&lt;/em&gt; to denote a text value? Why? Drop the 'Content' part unless there's a real good reason - it feels like ceremony.&lt;/p&gt;

&lt;p&gt;I'll formulate some more opinions on the WinJS side as I delve deeper....&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>I'm speaking at DDD Brisbane</title>
      <link>http://brendanforster.comddd-brisbane.html</link>
      <pubDate>Sat, 22 Oct 2011 23:00:00 +1000</pubDate>
      <author>shift.key@gmail.com (Brendan Forster)</author>
      <guid>http://brendanforster.com./ddd-brisbane</guid>
      <description>&lt;p&gt;&lt;img src='/img/main/metro-preview.png' width='400' height='300' alt='' title='' style='float: right;margin-left: 1.5em;'&gt;&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;http://dddbrisbane.com&quot;&gt;dddBrisbane&lt;/a&gt; organisers sent out a call over the weekend to finalise the schedule - some very cool talks that I'm looking forward to seeing (look for the schedule to appear early this week).&lt;/p&gt;

&lt;p&gt;I'm especially honoured to see my session was picked - especially after seeing the depth of Windows 8 talks submitted.&lt;/p&gt;

&lt;p&gt;So what am I talking about?&lt;/p&gt;

&lt;h2&gt;Windows 8 - Who Moved My Cheese?&lt;/h2&gt;

&lt;p&gt;The slides are available on &lt;a href=&quot;http://ddd-windows8.heroku.com&quot;&gt;Heroku&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The source code for the slides are available on &lt;a href=&quot;http://github.com/shiftkey/dddbrisbane&quot;&gt;Github&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Doing the build server dance with NuGet</title>
      <link>http://brendanforster.comdoing-the-build-server-dance-with-nuget.html</link>
      <pubDate>Fri, 08 Jul 2011 14:00:00 +1000</pubDate>
      <author>shift.key@gmail.com (Brendan Forster)</author>
      <guid>http://brendanforster.com./doing-the-build-server-dance-with-nuget</guid>
      <description>&lt;p&gt;I started exploring NuGet package building yesterday evening, as a strategy for managing dependencies between projects I'm involved with.&lt;/p&gt;

&lt;p&gt;And with NuGet in the enterprise being the &lt;a href=&quot;http://www.hanselman.com/blog/NuGetForTheEnterpriseNuGetInAContinuousIntegrationAutomatedBuildSystem.aspx&quot;&gt;upcoming hotness&lt;/a&gt;, I thought I'd see how I could get companies I work with to start doing similar things with their internal projects. It was much easier than I'd expected, with a couple of hurdles.&lt;/p&gt;

&lt;h2&gt;The Goal&lt;/h2&gt;

&lt;p&gt;I have two projects, A and B. A has no upstream dependencies (that have NuGet packages, anyway), but B requires A.&lt;/p&gt;

&lt;p&gt;So, after A builds and passes its tests, I want to:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Create a new package for A, using it's build number.&lt;/li&gt;
&lt;li&gt;Publish the package for A somewhere&lt;/li&gt;
&lt;li&gt;Trigger a new build for B, using the newest version of A.&lt;/li&gt;
&lt;li&gt;Verify B builds and passes tests.&lt;/li&gt;
&lt;li&gt;Create a new package for B, using it's build number.&lt;/li&gt;
&lt;li&gt;Publish the package for B somewhere.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;After a couple of hours work, I'm 95% of the way there.&lt;/p&gt;

&lt;h2&gt;Defining the package specification&lt;/h2&gt;

&lt;p&gt;As I wasn't really familiar with the process of creating the .nuspec file (sorry &lt;a href=&quot;http://twitter.com/damianedwards&quot;&gt;Damo&lt;/a&gt;, your NDC talk was a long time ago :)) I decided to go and craft it by hand. I used this &lt;a href=&quot;http://lostechies.com/joshuaflanagan/2011/06/23/tips-for-building-nuget-packages/&quot;&gt;blog post&lt;/a&gt; by &lt;a href=&quot;http://twitter.com/jflanagan&quot;&gt;Joshua Flanagan&lt;/a&gt; (including a good reference &lt;a href=&quot;https://github.com/DarthFubuMVC/bottles/blob/6d82e063fd889ac1909c98adc369a97b4c1e377e/packaging/nuget/bottles.nuspec&quot;&gt;nuspec file&lt;/a&gt;) to get started.&lt;/p&gt;

&lt;p&gt;And that's about it. Put that into my build folder along with the NuGet.exe - I grabbed the latest one from the 1.4 OOB build on &lt;a href=&quot;http://ci.nuget.org:8080/&quot;&gt;NuGet CI server&lt;/a&gt; due to an issue with how it parses the &amp;lt;files&amp;gt; element. This should be part of the next release.&lt;/p&gt;

&lt;h2&gt;Building the package on the server&lt;/h2&gt;

&lt;p&gt;So, I'm using TeamCity to build the project. Thus, I can use the build number directly against the NuGet package.&lt;/p&gt;

&lt;p&gt;NOTE: Using the default value TeamCity provides for a project, which is just an incrementing integer, will fail with a &quot;Version string portion was too short or too long&quot; error. To fix that, go to General Settings and make it something more descriptive:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;img/posts/NuGet/BuildNumber.png&quot; alt=&quot;General Settings&quot; /&gt;&lt;/p&gt;

&lt;p&gt;With that in place, the next step is to add in a post-build step:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/img/posts/NuGet/PackageStep.png&quot;&gt;&lt;img src=&quot;/img/posts/NuGet/PackageStep-Small.png&quot; alt=&quot;Post Build Step&quot; /&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;The script I've used (duplicated for two different packages):&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;del *.nupkg

.\NuGet.exe pack Package.nuspec -Version %system.build.number%
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;That script is courtesy of Scott Kirkland, who also has a decent guide to using NuGet on TC &lt;a href=&quot;http://weblogs.asp.net/srkirkland/archive/2011/03/29/deploy-nuget-packages-during-ci-build-with-teamcity.aspx&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;h2&gt;Publishing the package&lt;/h2&gt;

&lt;p&gt;I didn't want to publish these packages to the NuGet gallery immediately, so what other options do I have? I could set up my own NuGet gallery. Or I could use &lt;a href=&quot;http://www.myget.org/&quot;&gt;MyGet&lt;/a&gt; and skip all the hassle.&lt;/p&gt;

&lt;p&gt;For those who aren't familiar with MyGet, its a service to create custom NuGet feeds. All I've done so far is create a private feed (which anyone can consume) and obtained an API key.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;img/posts/NuGet/myget.png&quot;&gt;&lt;img src=&quot;img/posts/NuGet/myget-small.png&quot; alt=&quot;Post Build Step&quot; /&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;While MyGet supports the ability to upload or create packages within the admin UI, I was feeling lazy and wanted to push packages from the build server.&lt;/p&gt;

&lt;p&gt;This required an additional line in the script:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;del *.nupkg

.\NuGet.exe pack Package.nuspec -Version %system.build.number%

forfiles /m *.nupkg /c &quot;cmd /c NuGet.exe push @FILE &amp;lt;your-key&amp;gt; -Source https://www.myget.org/F/mahapps/&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;which will find all .nupkg files and invoke &lt;em&gt;push&lt;/em&gt; against the specific repository - in this case, my private feed.&lt;/p&gt;

&lt;h2&gt;Trigger a new build&lt;/h2&gt;

&lt;p&gt;This isn't directly related to NuGet, but I wanted to force a new build when upstream packages change in TeamCity.&lt;/p&gt;

&lt;p&gt;Under Build Triggering in the Project Configuration, add a trigger for &quot;Finish Build&quot; and select the upstream project.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;img/posts/NuGet/buildtriggering.png&quot;&gt;&lt;img src=&quot;img/posts/NuGet/buildtriggering-small.png&quot; alt=&quot;Add Build Trigger&quot; /&gt;&lt;/a&gt;&lt;/p&gt;


&lt;h2&gt;Update the package for A and test&lt;/h2&gt;

&lt;p&gt;Right, this is where things get rough.&lt;/p&gt;

&lt;p&gt;I added a step before building the project, and executed this command:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;.\Nuget.exe update ..\MahApps.Twitter.sln -Source http://www.myget.org/f/mahapps
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;which will look through all the projects in my solution and update to the newest packages it can find. I've added in my MyGet feed URL to grab the latest packages from the specific feed.&lt;/p&gt;

&lt;p&gt;And this works. Kinda.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;img/posts/NuGet/updatescripts.png&quot;&gt;&lt;img src=&quot;img/posts/NuGet/updatescripts-small.png&quot; alt=&quot;Success?&quot; /&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;It updates my projects, but doesn't store updated packages locally.
Which causes my build to break.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;img/posts/NuGet/compileerrors.png&quot;&gt;&lt;img src=&quot;img/posts/NuGet/compileerrors-small.png&quot; alt=&quot;Oops&quot; /&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Scouring the forums produced &lt;a href=&quot;http://nuget.codeplex.com/discussions/264082&quot;&gt;this discussion&lt;/a&gt; on this issue, which recommended this workaround:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;nuget install MyProj\packages.config -o packages
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt;: a minor grievance with the &lt;em&gt;install&lt;/em&gt; command. Unlike the &lt;em&gt;update&lt;/em&gt; command, this works against a project's repository. This seems subpar, when I can call &lt;em&gt;update&lt;/em&gt; against a solution file. Can we get some consistency with this? Or have I missed something with how install behaves?&lt;/p&gt;

&lt;p&gt;Fine, not all workarounds are pretty.&lt;/p&gt;

&lt;p&gt;Let's modify my script to suit:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;.\Nuget.exe update ..\MahApps.Twitter.sln -Source http://www.myget.org/f/mahapps -Source https://go.microsoft.com/fwlink/?LinkID=206669 -o ..\packages

.\Nuget.exe install ..\src\Identica\packages.config -Source http://www.myget.org/f/mahapps -Source https://go.microsoft.com/fwlink/?LinkID=206669 -o ..\packages

.\Nuget.exe install ..\src\NET4\packages.config -Source http://www.myget.org/f/mahapps -Source https://go.microsoft.com/fwlink/?LinkID=206669 -o ..\packages

.\Nuget.exe install ..\src\Tests\packages.config -Source http://www.myget.org/f/mahapps -Source https://go.microsoft.com/fwlink/?LinkID=206669 -o ..\packages

.\Nuget.exe install ..\src\WP7\packages.config -Source http://www.myget.org/f/mahapps -Source https://go.microsoft.com/fwlink/?LinkID=206669 -o ..\packages
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Icky. Whatever, I've got awesome to do.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;https://go.microsoft.com/fwlink/?LinkID=206669&lt;/em&gt; is the path to the official NuGet feed (the build server couldn't find some packages), and it is explicitly after my local feed (I may have some custom packages which I prefer). And I've added the &quot;-o&quot; parameter to point to the default packages location, just in case.&lt;/p&gt;

&lt;p&gt;Aaaaand...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;img/posts/NuGet/installedpackages.png&quot;&gt;&lt;img src=&quot;img/posts/NuGet/installedpackages-small.png&quot; alt=&quot;Success!&quot; /&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Booyah!&lt;/p&gt;

&lt;h2&gt;TODO&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;submit patch for making update more &quot;correct&quot; ?&lt;/li&gt;
&lt;li&gt;demonstrate how to add to VS tooling and how it changes dev story&lt;/li&gt;
&lt;li&gt;some documentation on managing upstream dependencies&lt;/li&gt;
&lt;/ul&gt;

</description>
    </item>
    
    <item>
      <title>Soapbox: INotifyPropertyChanged - Stop the Madness</title>
      <link>http://brendanforster.cominotifypropertychanged-stop-the-madness.html</link>
      <pubDate>Sat, 18 Jun 2011 14:00:00 +1000</pubDate>
      <author>shift.key@gmail.com (Brendan Forster)</author>
      <guid>http://brendanforster.com./inotifypropertychanged-stop-the-madness</guid>
      <description>&lt;p&gt;Its time to stop with this madness.&lt;/p&gt;

&lt;p&gt;Apologies again to &lt;a href=&quot;http://twitter.com/kiwipom&quot;&gt;Ian&lt;/a&gt; as I picked on him unnecessarily when I read yet another &quot;Let's make OnPropertyChanged compile safe&quot; &lt;a href=&quot;http://xaml.geek.nz/binding/5&quot;&gt;blog post&lt;/a&gt; yesterday.&lt;/p&gt;

&lt;p&gt;I don't have an issue with the approach, but I had an issue with the bigger picture - how little had changed for XAML developers in this regard. Keep in mind that lambdas were first made available in C# 3.0 - which itself was made available in 2007, with .NET 3.5.&lt;/p&gt;

&lt;p&gt;I've been summoned into this debate &lt;a href=&quot;http://www.mail-archive.com/ozdotnet@ozdotnet.com/msg03903.html&quot;&gt;before&lt;/a&gt; (and was assumed to be a &quot;cool kid&quot;) so I thought I'd put down some thoughts on the issue, and what I think needs to change:&lt;/p&gt;

&lt;h2&gt;Stop writing plumbing code&lt;/h2&gt;

&lt;p&gt;Every time you write logic in the setter of a property, an angel disappoints her family by taking up stripping.&lt;/p&gt;

&lt;p&gt;There have been compelling reasons to do so. After dealing with the resulting pain, I've explored other options to take all those needs away. So let's break it down:&lt;/p&gt;

&lt;p&gt;To start off with the &lt;em&gt;worst&lt;/em&gt; case scenario, we have:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;private string _someProperty;
public string SomeProperty
{
    get { return _someProperty; }
    set 
    { 
        _someProperty = value;
        OnPropertyChanged(&quot;SomeProperty&quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;Make it refactor-friendly - let's use a lambda instead!&lt;/h3&gt;

&lt;p&gt;Yes, this is better than magic strings - that's about it. Don't you get that sinking feeling when adding a new property to the viewmodel, and the code inside the setter looks almost identical to all the others?&lt;/p&gt;

&lt;p&gt;So let's change the property to look like:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;private string _someProperty;
public string SomeProperty
{
    get { return _someProperty; }
    set 
    { 
        _someProperty = value;
        OnPropertyChanged(() =&amp;gt; SomeProperty);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For an example implementation that accepts lambda statements, &lt;a href=&quot;http://stackoverflow.com/questions/141370/inotifypropertychanged-property-name-hardcode-vs-reflection/1209104#1209104&quot;&gt;this Stackoverflow answer&lt;/a&gt; is a good starting point.&lt;/p&gt;

&lt;h3&gt;I only want to raise the change when the backing value actually changes!&lt;/h3&gt;

&lt;p&gt;&quot;Wait,&quot; the audience exlaims in shock, &quot;you're going to raise the event each time now.&quot; The author relents, and adds some code to end the pain for the audience:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;private string _someProperty;
public string SomeProperty
{
    get { return _someProperty; }
    set 
    { 
        if (_someProperty == value)
            return;

        _someProperty = value;
        OnPropertyChanged(() =&amp;gt; SomeProperty);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I'd better ensure this is defined in all the setters, and that the right backing field is used in each case. I'd look pretty silly if I'd used the wrong field, like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// elsewhere in the codebase
private string _someOtherProperty;

// ...

private string _someProperty;
public string SomeProperty
{
    get { return _someProperty; }
    set 
    { 
        if (_someOtherProperty == value)
            return;

        _someProperty = value;
        OnPropertyChanged(() =&amp;gt; SomeProperty);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;so I'd better do it real carefully...&lt;/p&gt;

&lt;h3&gt;We need caching now!&lt;/h3&gt;

&lt;p&gt;Really? That's what comes to mind next? You crazy developers.&lt;/p&gt;

&lt;p&gt;Fine, let's add a dictionary to capture the event arguments, instead of recreating them each time (adapted from this &lt;a href=&quot;http://www.paulstovell.com/strong-property-names&quot;&gt;blog post&lt;/a&gt;):&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public class ViewModelBase
{
    protected void OnPropertyChanged(Expression&amp;lt;Func&amp;lt;object&amp;gt;&amp;gt; lambda)
    {
        // Go read Paul (and especially Miguel's comment) about this [here][6]. I'll wait...
    }

    private IDictionary&amp;lt;string, PropertyChangedEventArgs&amp;gt; _handlers = new Dictionary&amp;lt;string, PropertyChangedEventArgs&amp;gt;      

    protected void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventArgs args;

        if (!_handlers.ContainsKey(propertyName))
        {
            _handlers.Add(propertyName, new PropertyChangedEventArgs(propertyName));
        }

        args = _handlers[propertyName];

        PropertyChanged(this, args);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Have we saved much? Perhaps. Perhaps not...&lt;/p&gt;

&lt;h3&gt;Wait, what about cross-thread issues? I do a lot on the background thread!&lt;/h3&gt;

&lt;p&gt;Ah yes. Have you ever been bitten by this one - a background thread updates a property, which triggers the PropertyChanged event, which asplodes because the UI can only be updated from the main thread?&lt;/p&gt;

&lt;h2&gt;Stop. Put down the keyboard for a minute.&lt;/h2&gt;

&lt;p&gt;See how quickly all these features around INotifyPropertyChanged can spiral out of control? You've worked out the code and classes necessary to solve a common problem, but some overhead remains for writing boilerplate code everywhere the solution is required. And while it is a manual process, it is prone to human error.&lt;/p&gt;

&lt;p&gt;Go back and read that last sentence again. Did something click about what you've been doing all along with INotifyPropertyChanged?&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/posts/Achievement.jpg&quot; alt=&quot;Huzzah!&quot; /&gt;&lt;/p&gt;

&lt;h2&gt;A what?&lt;/h2&gt;

&lt;p&gt;INotifyPropertyChanged is a very specialised example of a cross-cutting concern.&lt;/p&gt;

&lt;p&gt;We use INotifyPropertyChanged in many places when doing XAML-based applications - as it is critical when databinding POCO objects without requiring the use of DependencyProperty instances. Although we spent a lot of time optimising the behaviour of invoking INotifyPropertyChanged, we didn't improve &lt;strong&gt;how&lt;/strong&gt; this code is used - we're still copying-and-pasting the same code around, and having to make manual changes to each instance to suit the property.&lt;/p&gt;

&lt;p&gt;We need the ability to apply the INotifyPropertyChanged behaviour in an automatic way. Of course, there are various tradeoffs to consider - which I'll outline from my experiences.&lt;/p&gt;

&lt;h2&gt;What Next?&lt;/h2&gt;

&lt;p&gt;I need to wrap this post up before it becomes even longer, so until my next post - where I'll discuss how AOP flips all this discussion on its ear - readers can get ahead by reading these links:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Sacha Barber - &lt;a href=&quot;http://www.codeproject.com/KB/library/Aspects.aspx&quot;&gt;Aspect Examples (INotifyPropertyChanged via Aspects)&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://twitter.com/philiplaureano&quot;&gt;Philip Laureano&lt;/a&gt; linked me this yesterday. A large read, but lots of demo code for people who want to see something more concrete.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;http://code.google.com/p/notifypropertyweaver/&quot;&gt;NotifyPropertyWeaver&lt;/a&gt; - a .NET library for weaving INotifyPropertyChanged code into IL&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;This is my library of choice for automating INotifyPropertyChanged usage. I definitely owe &lt;a href=&quot;http://twitter.com/simoncropp&quot;&gt;Simon&lt;/a&gt; a beer (or drink of choice) next time we cross paths - its been a joy to use.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>On the Windows 8 Preview Video</title>
      <link>http://brendanforster.comon-the-windows-8-preview.html</link>
      <pubDate>Wed, 08 Jun 2011 14:00:00 +1000</pubDate>
      <author>shift.key@gmail.com (Brendan Forster)</author>
      <guid>http://brendanforster.com./on-the-windows-8-preview</guid>
      <description>&lt;p&gt;For those who haven't seen it, this video was announced last week about how the Windows 8 UI is changing: &lt;a href=&quot;http://www.youtube.com/watch?v=p92QfWOw88I&quot;&gt;http://www.youtube.com/watch?v=p92QfWOw88I&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It was the trigger for significant backlash - and not for what was said, but for what wasn't said around the other options available for building Windows applications.&lt;/p&gt;

&lt;h2&gt;Yes, MSFT could have handled it better&lt;/h2&gt;

&lt;p&gt;Since the video dropped, developers and possibly everyone with a blog has been raising concerns about the other options available to developers for building Windows apps. The underlying vibe has been &quot;everything else has been abandoned, the only option is now HTML5, the sky is falling and I have nothing to wear&quot;. I haven't watched the Sinofsky video (if it was even recorded), but when you see reporting like:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&quot;The development platform is based on HTML5 and JavaScript.&quot; &lt;a href=&quot;http://news.cnet.com/8301-31021_3-20068119-260/sinofsky-shows-off-windows-8-at-d9/&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;and constrast with a different source:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&quot;Windows 8 essentially supports two kinds of applications. One is the classic Windows application, which runs in a desktop very similar to the Windows 7 desktop.&quot; &lt;a href=&quot;http://allthingsd.com/20110601/exclusive-making-sense-of-what-we-just-learned-about-windows-8/&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;then you know something got lost in the message.&lt;/p&gt;

&lt;h2&gt;The sky is falling for &lt;em&gt;insert technology here&lt;/em&gt;&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://forums.silverlight.net/forums/t/230502.aspx&quot;&gt;That thread&lt;/a&gt;. Oh dear $deity, &lt;a href=&quot;http://forums.silverlight.net/forums/p/230725/563975.aspx&quot;&gt;that thread&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I appreciate that the MSFT guys &quot;in the field&quot; are stuck between a rock and a hard place currently - they cannot provide details to answer people's concerns or questions, but are dealing with a large backlash due to the large amount that is not know currently.&lt;/p&gt;

&lt;p&gt;As one of those in the audience who has to wait, in uncertainty, between now and &lt;a href=&quot;http://www.buildwindows.com/&quot;&gt;BUILD&lt;/a&gt; to have these questions answered, I wish they would rethink this decision and respond to questions and help change the course of discussion.&lt;/p&gt;

&lt;p&gt;While the video does mention:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&quot;Windows 8 also runs the existing Windows apps that you know and that you love&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;it then follows up with running Excel.&lt;/p&gt;

&lt;p&gt;Yep. Excel.&lt;/p&gt;

&lt;p&gt;While an Excel demo is a good indicator of the backwards compatibility that Windows is famous for, it was a jarring change from the rest of the video, and I'm not sure it was the best application to demonstrate.&lt;/p&gt;

&lt;p&gt;Perhaps the developer story is not ready to show. Perhaps it was supposed to be about the shell, and HTML5 was only mentioned in passing. Perhaps, perhaps, perhaps. I suspect a demonstration of how a WPF/SL/Winforms/native application &lt;strong&gt;could&lt;/strong&gt; look/feel/behave within the new shell would provide some information without giving much away.&lt;/p&gt;

&lt;p&gt;The video was about creating interest in the new platform and discussing the opportunities it provides. Now is the time to talk more broadly, while everyone is talking about it.&lt;/p&gt;

&lt;p&gt;So instead of &lt;a href=&quot;http://forums.silverlight.net/forums/t/230744.aspx&quot;&gt;drumming up more drama&lt;/a&gt;, I thought I'd share some takeaways for both sides on this:&lt;/p&gt;

&lt;h2&gt;Devs: pay attention to the user experience&lt;/h2&gt;

&lt;p&gt;I hope developers took away from this story how the user experience of applications has changed, and how the classic WIMP (Windows, Icons, Menu, Pointer) applications will be impacted. Much like the transition from Windows Mobile 6.5 to Windows Phone 7, I anticipate some growing pains once developers get their hands on the development tools.&lt;/p&gt;

&lt;p&gt;Touch input is also something that many Windows developers may not be familiar with. While it has been available to native developers since Windows 7 launched, and was added to WPF and Silverlight with subsequent product releases, it hasn't really been utilized to anywhere near its full potential.&lt;/p&gt;

&lt;p&gt;Get familiar with how gestures work - as a starting point, the WP7 emulator turns mouse inputs into touch inputs. Touch will be mandatory if you want an application to be usable on different form factors (Windows 8 is taking an iOS-ish route with the same codebase running on desktops, tablets and devices).&lt;/p&gt;

&lt;h2&gt;MSFT: don't let the echo chamber continue&lt;/h2&gt;

&lt;p&gt;I'm still baffled by the decision to stonewall. Developers are customers, and they have questions. Why not be pro-active and help smooth the transition over the coming months?&lt;/p&gt;

&lt;p&gt;With all the strong and passionate opinions flying around, wouldn't it be good to plant some seeds of confidence and turn the conversation from &quot;Where is XYZ?&quot; to &quot;What can I do with Windows 8 using XYZ?&quot;&lt;/p&gt;

&lt;p&gt;Give the community a baseline of information so they can start planning and start providing feedback. It doesn't have to be revealing all the cards, but the developer story for Windows 8 is (mostly) unknown currently. That's why people are concerned.&lt;/p&gt;

&lt;h2&gt;MSFT: don't forget the hardware&lt;/h2&gt;

&lt;p&gt;I've been looking for a kick-arse tablet device to run Windows on for a while, but have been stuck in Goldilocks-mode - &quot;too large, too heavy, the battery is too short, etc&quot; - and continue to sit on the fence. Much like with WP7, I'm curious about the involvement of hardware vendors to support the new features coming in Windows 8.&lt;/p&gt;

&lt;p&gt;Windows 7 was launched with support for touch input, but it never really gained traction due to lack of a compelling tablet device - the Touchsmarts were a nice device, but were primarily for kiosks, rather than daily usage.&lt;/p&gt;

&lt;p&gt;Compare Windows 7 to the WP7 launches - which have been done with device announcements involving hardware vendors - and it gives me hope that the launch can be done in a more &quot;complete&quot; fashion.&lt;/p&gt;

&lt;p&gt;And I want to see more presentations from MSFT about Windows 8 using touch - drive the presentations from a tablet, demonstrate how the new UI supports touch, and compel me to put it everywhere.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>slsvcutil - Workaround StackOverflowException</title>
      <link>http://brendanforster.comslsvcutil-stackoverflowexception-workaround.html</link>
      <pubDate>Fri, 06 May 2011 14:00:00 +1000</pubDate>
      <author>shift.key@gmail.com (Brendan Forster)</author>
      <guid>http://brendanforster.com./slsvcutil-stackoverflowexception-workaround</guid>
      <description>&lt;p&gt;I've hit this issue before, but it took a bit of googling to remember the fix - especially since that little site called &lt;a href=&quot;http://www.stackoverflow.com/&quot;&gt;stackoverflow&lt;/a&gt; came into the mix :)&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;D:\Readify\Hg\ReadifySample\src&amp;gt;&quot;C:\Program Files (x86)\Microsoft SDKs\Silverlight\v4.0\Tools\Slsvcutil.exe&quot; http://localhost:47862/Services/ParentService.svc

Process is terminated due to StackOverflowException.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;No configuration options set. No informative error message. Annoying.&lt;/p&gt;

&lt;p&gt;The solution, which was initially posted &lt;a href=&quot;http://blogs.msdn.com/b/silverlightws/archive/2010/04/30/workaround-for-stackoverflowexception-when-using-slsvcutil-exe.aspx&quot;&gt;here&lt;/a&gt; over a year ago, is to add in a configuration file alongside slsvcutil.exe, called &lt;strong&gt;slsvcutil.exe.config&lt;/strong&gt;, which will point to the neutral-culture assembly.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;configuration&amp;gt;
  &amp;lt;satelliteassemblies&amp;gt;
    &amp;lt;assembly name=&quot;SlSvcUtil, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&quot; /&amp;gt;
  &amp;lt;/satelliteassemblies&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;That's right. If you have set your system language to something &lt;strong&gt;other than US English&lt;/strong&gt;, you will probably encounter this issue.&lt;/p&gt;

&lt;p&gt;Enjoy.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Musing - Simpler UI Testing for WPF Apps</title>
      <link>http://brendanforster.comsimpler-ui-testing-for-wpf-apps.html</link>
      <pubDate>Sat, 26 Mar 2011 13:00:00 +1000</pubDate>
      <author>shift.key@gmail.com (Brendan Forster)</author>
      <guid>http://brendanforster.com./simpler-ui-testing-for-wpf-apps</guid>
      <description>&lt;p&gt;After spending some time this week getting to know Ruby and some of its testing frameworks (Shoulda, rspec, and TestCase), I thought I'd put pen
to paper and revisit why I started down this path.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Some background&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The current project I am working on is a large data-driven WPF application, with a lot of complex scenarios to
identify, develop and test. There is a group of testers on the project, but I can see an opportunity to use
automated testing to verify functionality and allow testers to focus on areas of better value - exploratory testing, for example.&lt;/p&gt;

&lt;p&gt;Yes, there are frameworks like &lt;a href=&quot;http://white.codeplex.com/&quot;&gt;White&lt;/a&gt; or Coded UI Tests, but these tools were designed with developers in mind.
You have to write code like &lt;a href=&quot;http://msdn.microsoft.com/en-us/magazine/dd483216.aspx&quot;&gt;this&lt;/a&gt; to drive the tests, and the tests are commonly written after the feature is implemented.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Enter Automated Acceptance Testing&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;In an ideal world, business users would define tests in an English-like language, which can then be translated into an executable
script and run against the application.&lt;/p&gt;

&lt;p&gt;What I'm looking for in a framework for defining use cases:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;define the test first, so that the high-level scenario is set before development occurs&lt;/li&gt;
&lt;li&gt;flexible with syntax for test cases - tailor scripts to suit people involved, while remaining declarative&lt;/li&gt;
&lt;li&gt;integrate into deployment process to verify builds automated&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;strong&gt;Some inspiration from obscure corners&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;When I first saw the syntax for &lt;a href=&quot;http://msdn.microsoft.com/en-us/magazine/dd483216.aspx&quot;&gt;webrat&lt;/a&gt;, I was intrigued and jealous. To declare a test like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;class SignupTest &amp;lt; ActionController::IntegrationTest

    def test_trial_account_sign_up
        visit home_path
        click_link &quot;Sign up&quot;
        fill_in &quot;Email&quot;, :with =&amp;gt; &quot;good@example.com&quot;
        select &quot;Free account&quot;
        click_button &quot;Register&quot;
    end
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;was not far off what I'd had in mind for something that was easy to follow and easy to write.&lt;/p&gt;

&lt;p&gt;So I spent some time this week experimenting with various ways of achieving this against a sample WPF application.&lt;/p&gt;

&lt;p&gt;I'm using rspec at the moment to run the test cases, and IronRuby and White to support the integration with the hosted WPF application.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;What does a test for the WPF application look like?&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;describe &quot;new customers screen&quot; do

    subject { Host.new(File.expand_path('./app/WpfTestApp.exe', File.dirname(__FILE__)))

    before(:each) do
        click &quot;Add Customer&quot;
    end

    it &quot;cannot save empty form&quot; do
        cannot_click &quot;Save&quot;
        can_click &quot;Cancel&quot;
    end

    it &quot;can enter details for customer&quot; do
        fill &quot;FirstName&quot;, :with =&amp;gt; &quot;Brendan&quot;
        fill &quot;LastName&quot;, :with =&amp;gt; &quot;Forster&quot;
        # and some other fields
        can_click &quot;Save&quot;
    end

    it &quot;can save and return to main screen&quot; do
        fill &quot;FirstName&quot;, :with =&amp;gt; &quot;Brendan&quot;
        fill &quot;LastName&quot;, :with =&amp;gt; &quot;Forster&quot;
        # and some other fields
        click &quot;Save&quot;
        assert_title &quot;Dashboard&quot;
    end

    after(:each) do
        cleanup
    end

    def method_missing(sym, *args, &amp;amp;block)
        subject.send sym, *args, &amp;amp;block
    end
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The fields used here are based off the UI Automation features of the .NET Framework (some reading &lt;a href=&quot;http://white.codeplex.com/&quot;&gt;here&lt;/a&gt; on recommendations)
which I'll dig into a bit later if people are interested.&lt;/p&gt;

&lt;p&gt;The method_missing method is used to reduce the noise of writing &quot;subject.&quot; to start each line - I'm not quite sold on the approach, but it was cleaner than the previous approaches I'd tried.
Also, rspec has a &lt;a href=&quot;https://gist.github.com/663876&quot;&gt;huge set of features&lt;/a&gt; which I've barely scratched the surface on.&lt;/p&gt;

&lt;p&gt;So with a set of files like the file above, the testrunner is a simple script to load specific files found in the current directory:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;require 'rubygems'
require 'rspec'
require 'host'

Dir[File.dirname(__FILE__) + '/*tests.rb'].each do |file| 
    load file
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I'll share some more as I polish additional features (I'm most certainly doing Ruby wrong at the moment, so I keep refactoring code),
just needed to write this post.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Arguments about Project Structure</title>
      <link>http://brendanforster.comarguments-about-project-structure.html</link>
      <pubDate>Wed, 23 Feb 2011 13:00:00 +1000</pubDate>
      <author>shift.key@gmail.com (Brendan Forster)</author>
      <guid>http://brendanforster.com./arguments-about-project-structure</guid>
      <description>&lt;p&gt;Whenever it comes time to kick off a new project, how do you structure it?&lt;/p&gt;

&lt;p&gt;Given a greenfields situation - or even one of my side projects - I go for this layout:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;build&lt;/li&gt;
&lt;li&gt;lib&lt;/li&gt;
&lt;li&gt;licenses&lt;/li&gt;
&lt;li&gt;samples&lt;/li&gt;
&lt;li&gt;src

&lt;ul&gt;
&lt;li&gt;Project.ModuleA&lt;/li&gt;
&lt;li&gt;Project.ModuleB&lt;/li&gt;
&lt;li&gt;Project.Shell&lt;/li&gt;
&lt;li&gt;Project.sln&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;tools&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;And what do those these folders represent?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;build&lt;/strong&gt; - scripts for building and deploying the application. As soon as the application is required to be deployed to different environments, this should be scripted and added to source control.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;lib&lt;/strong&gt; - dependencies required by the application. I generally group the dependent assemblies if required, but will generally drop the dll-xml combination into the root folder.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;licenses&lt;/strong&gt; - when doing OSS development, this is a must. I should bring this into my general projects, especially if it has a significant mix of dependencies and licenses to manage.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;samples&lt;/strong&gt; - once the main solution gets beyond a specific size, it may be beneficial to separate the sample code out rather than compiling it within the main build.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;src&lt;/strong&gt; - there be code.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;tools&lt;/strong&gt; - dependencies required to build the application. This does not mean including every tool required to set up the developer baseline, but any special tools used during the build process&lt;/p&gt;

&lt;p&gt;For example, these would not belong:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Visual Studio&lt;/li&gt;
&lt;li&gt;.NET Framework&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;But I'd happily include these tools:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;FxCop&lt;/li&gt;
&lt;li&gt;NCover&lt;/li&gt;
&lt;li&gt;MSBuild Community Tasks&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;as not all developers would have them installed on their machines.&lt;/p&gt;

&lt;h2&gt;Why this structure?&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Folder Names&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Remember the days of 8.3 filesystems? I do. But thankfully this isn't about that.&lt;/p&gt;

&lt;p&gt;This structure also borrows from Unix conventions for arranging their codebases. I don't like how the necessary make files are hosted at the root.&lt;/p&gt;

&lt;p&gt;As we're using Mercurial, we don't need to worry about using trunks or tags in the structure.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Experience&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;When I challenged &lt;a href=&quot;http://twitter.com/aeoth&quot;&gt;@aeoth's&lt;/a&gt; project structure for the next version of MahTweets, he wanted to make it so that a developer with little experience in .NET (or programming) could download the source and try it out.&lt;/p&gt;

&lt;p&gt;I'd argue the best introduction to a codebase is two things:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;a README file to provide some notes about the application&lt;/li&gt;
&lt;li&gt;a batch file or script to run the application and execute tests&lt;/li&gt;
&lt;li&gt;sample projects to complement the source&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;strong&gt;The build is important&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;We had various pain points with the last version of MahTweets around managing loosely-coupled modules under development, and then building a signed ClickOnce installer with a custom script.&lt;/p&gt;

&lt;p&gt;It ended up being a painful few nights bashing against MSBuild (have you ever tried to use SignFile manually?), but the effort burnt reminds me everytime I come across a new team or project to ask two simple questions:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;how can someone build and run the application with limited knowledge of the codebase?&lt;/li&gt;
&lt;li&gt;how can someone test the application with limited knowledge of the codebase?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If that process is known and documented, it highlights all the quirks with getting the application out. If it isn't documented, then typically you need to find the right person at the right time...&lt;/p&gt;

&lt;p&gt;Putting the build components separate, but easily visible, makes everyone's life easier.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Habit&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;And lastly, this is my personal opinion. Having spent a lot of time playing around with Linux OSS in the past, I keep coming back to that style of structure when setting up my own projects. Seeing things like uppercase folder names at the root just feel odd.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Using Rx to Implement Filtering in MahTweets</title>
      <link>http://brendanforster.comusing-rx-to-implement-filtering-in-mahtweets.html</link>
      <pubDate>Sat, 19 Feb 2011 13:00:00 +1000</pubDate>
      <author>shift.key@gmail.com (Brendan Forster)</author>
      <guid>http://brendanforster.com./using-rx-to-implement-filtering-in-mahtweets</guid>
      <description>&lt;p&gt;As we're kicking development off for the next version of MahTweets in the coming weeks, the team has been looking at experimenting with new technology and bringing the most useful stuff into the application.&lt;/p&gt;

&lt;p&gt;Filtering is one of the things that MahTweets is famous for, but we're always looking for ways to make it better and easier. We've been experimenting with using the &lt;a href=&quot;http://msdn.microsoft.com/en-us/devlabs/ee794896&quot;&gt;Reactive Extensions (Rx) for .NET&lt;/a&gt; to simplify the entire pipeline and provide more freedom in the application.&lt;/p&gt;

&lt;h2&gt;The Current Status&lt;/h2&gt;

&lt;p&gt;MahTweets allow the user to filter streams by update type, contact or text. Filters can be applied to individual streams or globally.&lt;/p&gt;

&lt;p&gt;Roughly speaking, this is how the filters are applied.&lt;/p&gt;

&lt;center&gt;&lt;a href=&quot;img/posts/FiltersClassic.png&quot;&gt;&lt;img src=&quot;img/posts/FiltersClassic.png&quot; width=&quot;700&quot; /&gt;&lt;/a&gt;&lt;/center&gt;


&lt;p&gt;Updates from external services are added to the queue, which then raises CollectionChangedEvent notifications to each views. The view is responsible for running an update through its configured filters.&lt;/p&gt;

&lt;p&gt;Limitations about this approach:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Global Ignores were implemented separately.&lt;/li&gt;
&lt;li&gt;Custom filtering was implemented per update type.&lt;/li&gt;
&lt;li&gt;UI was coupled to stream container and specific parameters.&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;First Cut using Rx&lt;/h2&gt;

&lt;p&gt;FYI: If you're not familiar with the Observer Pattern, check out the &lt;a href=&quot;http://en.wikipedia.org/wiki/Observer_pattern&quot;&gt;Wikipedia article&lt;/a&gt; for starters. Rx uses the Observer pattern heavily.&lt;/p&gt;

&lt;p&gt;We had a habit of using the phrase &quot;filter&quot; in many places of the application. To clarify our intent, we introduced two specific interfaces:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;IStatusSubscriber&lt;/strong&gt; - an extension which subscribes to a stream of incoming requests.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IConditionalSubscriber&lt;/strong&gt; : &lt;strong&gt;IStatusSubscriber&lt;/strong&gt; - an extension which filters the updates before propogating to its consumers. Pass-thru or exclude filters can be specified.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Replacing the Queue of messages with an IObservable/IObserver dual allows the application to leverage the Subject&amp;lt;T&amp;gt; class to manage the interactions between the services and the clients. This class resides in System.Reactive.dll and implements both IObservable&amp;lt;T&amp;gt; and IObserver&amp;lt;T&amp;gt;.&lt;/p&gt;

&lt;p&gt;MahTweets also had some demo plugins for stream analytics, and abstracting away the queue support allows the application to plug in additional &quot;global&quot; services, using the same interfaces. Rx also allows observers to specify which thread to execute on, so the usage of the Dispatcher, TaskPool or ThreadPool (depending on scenario) can be configured without any plumbing code.&lt;/p&gt;

&lt;p&gt;The interactions between these components now looks like:&lt;/p&gt;

&lt;center&gt;&lt;a href=&quot;img/posts/RxFirstCut.png&quot;&gt;&lt;img src=&quot;img/posts/RxFirstCut.png&quot; width=&quot;700&quot; /&gt;&lt;/a&gt;&lt;/center&gt;


&lt;p&gt;The biggest change is that subscribers interact with the IObservable, rather than being encompassed within the view. Each list still combines a set of filters, which display the combined set of results on-screen. However, when multiple filters are run in parallel, invalid items may appear.&lt;/p&gt;

&lt;p&gt;Limitations about this approach:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Excluded updates may be propogated through other subscribers in the same view.&lt;/li&gt;
&lt;li&gt;Global Ignores still not supported.&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;Back to the Drawing Board&lt;/h2&gt;

&lt;p&gt;So after some shut-eye and sun, I revisited the initial design for the IObservable implementation. What stood out to me was that:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Include and exclude side-by-side has always been somewhat complex - both for users to understand, and determining which takes priority.&lt;/li&gt;
&lt;li&gt;Include and exclude filters didn't need to exist in the same location.&lt;/li&gt;
&lt;li&gt;Rx can support chaining observers, however...&lt;/li&gt;
&lt;li&gt;Chaining isn't what the Observer pattern is about.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;After some more musing, I formed an opinion about subscriber rules (only mine so far):&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;An exclude rule is applied globally. An include rule is applied locally.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;From my experiences with using Twitter, the typical use cases for exclude filters are:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&quot;Great, another Twitter spam concept...&quot; &lt;em&gt;looks at paper.li&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&quot;Person XYZ is tweeting too much right now. I don't want to hear him for a while...&quot;&lt;/li&gt;
&lt;li&gt;&quot;Oops, I said the i-word and the spammers are out and about...&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;On the other hand, the use cases for include filters can be like:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&quot;I want to see what &lt;em&gt;this&lt;/em&gt; group of contacts is talking about...&quot;&lt;/li&gt;
&lt;li&gt;&quot;I want to see tweets mentioning 'ABC' - (side note: more on search later)...&quot;&lt;/li&gt;
&lt;li&gt;&quot;I want to see my mentions/messages...&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Compare and contract (perhaps your experiences differ).&lt;/p&gt;

&lt;h2&gt;Second Cut using Rx&lt;/h2&gt;

&lt;p&gt;The second cut of the design allows for three subscriber hooks:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Subscribers register against the source observable, without any filtering applied.&lt;/li&gt;
&lt;li&gt;Subscribers register against the output observable, with the global filtering applied.&lt;/li&gt;
&lt;li&gt;Exclude rules are applied closer to the source.&lt;/li&gt;
&lt;/ul&gt;


&lt;center&gt;&lt;a href=&quot;img/posts/RxSecondCut.png&quot;&gt;&lt;img src=&quot;img/posts/RxSecondCut.png&quot; width=&quot;700&quot; /&gt;&lt;/a&gt;&lt;/center&gt;


&lt;p&gt;An internal subscriber verifies a status against a list of exclusions, and propogates the status further if it is valid. Each view only requires its inclusion rules (or a wildcard rule if no rules specified) to display results.&lt;/p&gt;

&lt;h2&gt;The Next Step&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Debate with &lt;a href=&quot;http://twitter.com/aeoth&quot;&gt;@aeoth&lt;/a&gt; on this&lt;/li&gt;
&lt;li&gt;Performance Testing against a large set of data.&lt;/li&gt;
&lt;li&gt;Demonstrating how external plugins can include their own rules.&lt;/li&gt;
&lt;li&gt;Demonstrate user interface changes for vNext.&lt;/li&gt;
&lt;/ul&gt;

</description>
    </item>
    

  </channel>
</rss>