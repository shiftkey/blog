<!DOCTYPE html>

<!-- 
320 and Up boilerplate extension
Author: Andy Clarke
Version: 0.9b
URL: http://stuffandnonsense.co.uk/projects/320andup 
-->

<!--[if IEMobile 7 ]><html class="no-js iem7" manifest="default.appcache?v=1"><![endif]-->
<!--[if lt IE 7 ]><html class="no-js ie6" lang="en"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7" lang="en"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8" lang="en"><![endif]-->
<!-- TODO: appcache definition -->
<!--[if (gte IE 9)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->

<head>
<meta charset="utf-8">

<title>Arguments about Project Structure</title>
<meta name="description" content="">
<meta name="author" content="brendan forster">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1">

<!-- robots -->
<meta name="robots" content="/robots.txt" />

<!-- For less capable mobile browsers
<link rel="stylesheet" media="handheld" href="css/handheld.css?v=1">  -->

<!-- For all browsers -->
<link rel="stylesheet" media="screen" href="/css/style.css?v=1">

<link rel="stylesheet" media="print" href="/css/print.css?v=1">
<!-- For progressively larger displays -->
<link rel="stylesheet" media="only screen and (min-width: 480px)" href="/css/480.css?v=1">
<link rel="stylesheet" media="only screen and (min-width: 768px)" href="/css/768.css?v=1">
<link rel="stylesheet" media="only screen and (min-width: 992px)" href="/css/992.css?v=1">
<link rel="stylesheet" media="only screen and (min-width: 1382px)" href="/css/1382.css?v=1">
<!-- For Retina displays -->
<link rel="stylesheet" media="only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)" href="/css/2x.css?v=1">

<link rel="stylesheet" media="screen" href="/css/custom.css?v=1">

<!-- JavaScript at bottom except for Modernizr -->
<script src="/js/libs/modernizr-1.7.min.js"></script>

<!-- For iPhone 4 -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/h/apple-touch-icon.png">
<!-- For iPad 1-->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/m/apple-touch-icon.png">
<!-- For iPhone 3G, iPod Touch and Android -->
<link rel="apple-touch-icon-precomposed" href="/img/l/apple-touch-icon-precomposed.png">
<!-- For Nokia -->
<link rel="shortcut icon" href="/img/l/apple-touch-icon.png">
<!-- For everything else -->
<link rel="shortcut icon" href="/favicon.ico">

<!--iOS. Delete if not required -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-startup-image" href="/img/splash.png">

<!--Microsoft. Delete if not required -->
<meta http-equiv="cleartype" content="on">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<!-- http://t.co/y1jPVnT -->
<link rel="canonical" href="arguments-about-project-structure.html">
</head>


<body class="clearfix">

<header role="banner" class="clearfix">
	<h1>Arguments about Project Structure</h1>
</header>

<div class="content clearfix">

	<div id="post">
<p>Whenever it comes time to kick off a new project, how do you structure it?</p>

<p>Given a greenfields situation - or even one of my side projects - I go for this layout:</p>

<ul>
<li>build</li>
<li>lib</li>
<li>licenses</li>
<li>samples</li>
<li>src

<ul>
<li>Project.ModuleA</li>
<li>Project.ModuleB</li>
<li>Project.Shell</li>
<li>Project.sln</li>
</ul>
</li>
<li>tools</li>
</ul>


<p>And what do those these folders represent?</p>

<p><strong>build</strong> - scripts for building and deploying the application. As soon as the application is required to be deployed to different environments, this should be scripted and added to source control.</p>

<p><strong>lib</strong> - dependencies required by the application. I generally group the dependent assemblies if required, but will generally drop the dll-xml combination into the root folder.</p>

<p><strong>licenses</strong> - when doing OSS development, this is a must. I should bring this into my general projects, especially if it has a significant mix of dependencies and licenses to manage.</p>

<p><strong>samples</strong> - once the main solution gets beyond a specific size, it may be beneficial to separate the sample code out rather than compiling it within the main build.</p>

<p><strong>src</strong> - there be code.</p>

<p><strong>tools</strong> - dependencies required to build the application. This does not mean including every tool required to set up the developer baseline, but any special tools used during the build process</p>

<p>For example, these would not belong:</p>

<ul>
<li>Visual Studio</li>
<li>.NET Framework</li>
</ul>


<p>But I'd happily include these tools:</p>

<ul>
<li>FxCop</li>
<li>NCover</li>
<li>MSBuild Community Tasks</li>
</ul>


<p>as not all developers would have them installed on their machines.</p>

<h2>Why this structure?</h2>

<p><strong>Folder Names</strong></p>

<p>Remember the days of 8.3 filesystems? I do. But thankfully this isn't about that.</p>

<p>This structure also borrows from Unix conventions for arranging their codebases. I don't like how the necessary make files are hosted at the root.</p>

<p>As we're using Mercurial, we don't need to worry about using trunks or tags in the structure.</p>

<p><strong>Experience</strong></p>

<p>When I challenged <a href="http://twitter.com/aeoth">@aeoth's</a> project structure for the next version of MahTweets, he wanted to make it so that a developer with little experience in .NET (or programming) could download the source and try it out.</p>

<p>I'd argue the best introduction to a codebase is two things:</p>

<ul>
<li>a README file to provide some notes about the application</li>
<li>a batch file or script to run the application and execute tests</li>
<li>sample projects to complement the source</li>
</ul>


<p><strong>The build is important</strong></p>

<p>We had various pain points with the last version of MahTweets around managing loosely-coupled modules under development, and then building a signed ClickOnce installer with a custom script.</p>

<p>It ended up being a painful few nights bashing against MSBuild (have you ever tried to use SignFile manually?), but the effort burnt reminds me everytime I come across a new team or project to ask two simple questions:</p>

<ul>
<li>how can someone build and run the application with limited knowledge of the codebase?</li>
<li>how can someone test the application with limited knowledge of the codebase?</li>
</ul>


<p>If that process is known and documented, it highlights all the quirks with getting the application out. If it isn't documented, then typically you need to find the right person at the right time...</p>

<p>Putting the build components separate, but easily visible, makes everyone's life easier.</p>

<p><strong>Habit</strong></p>

<p>And lastly, this is my personal opinion. Having spent a lot of time playing around with Linux OSS in the past, I keep coming back to that style of structure when setting up my own projects. Seeing things like uppercase folder names at the root just feel odd.</p>

</div>


	<div id="disqus_thread"></div>
<script type="text/javascript">
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://shiftkey.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>03 Dec 2011</span> &raquo; <a href="alt-net-open-spaces-2011.html">ALT.NET Open Spaces</a></li>
    
      <li><span>26 Oct 2011</span> &raquo; <a href="jquery-knockout-win8.html">jQuery and KnockoutJS in Win8? Sure, why not!</a></li>
    
      <li><span>23 Oct 2011</span> &raquo; <a href="ddd-brisbane.html">I'm speaking at DDD Brisbane</a></li>
    
  </ul>
</div>

</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.5.1.min.js">\x3C/script>')</script>
<script src="/js/plugins.js"></script>
<script src="/js/script.js"></script>

<!--[if (lt IE 9) & (!IEMobile)]>
<script src="/js/libs/DOMAssistantCompressed-2.8.js"></script>
<script src="/js/libs/selectivizr-1.0.1.js"></script>
<script src="/js/libs/respond.min.js"></script>
<![endif]-->

<script>
var _gaq=[['_setAccount','UA-8441214-1'],['_trackPageview']]; 
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<noscript>Your browser does not support JavaScript!</noscript>

</body>
</html>